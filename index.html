<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simple Notification Test</title>
</head>
<body style="font-family: Arial; padding: 30px;">

<h2>Notification Time Test</h2>

<label>Enter Time (24-hour format):</label>
<input type="time" id="notifyTime">
<button onclick="startCheck()">Start</button>

<p id="status"></p>

<script>
let checkInterval = null;
let targetTime = null;

async function requestPermission() {
    if (!("Notification" in window)) {
        alert("Notifications not supported in this browser.");
        return false;
    }

    if (Notification.permission === "granted") return true;

    if (Notification.permission !== "denied") {
        const permission = await Notification.requestPermission();
        return permission === "granted";
    }

    return false;
}

async function startCheck() {
    const ok = await requestPermission();
    if (!ok) {
        alert("Notification permission denied.");
        return;
    }

    targetTime = document.getElementById("notifyTime").value;
    if (!targetTime) {
        alert("Please enter a time.");
        return;
    }

    document.getElementById("status").innerText =
        "Waiting for " + targetTime;

    if (checkInterval) clearInterval(checkInterval);

    checkInterval = setInterval(checkTime, 1000);
}

function checkTime() {
    const now = new Date();
    const current =
        now.getHours().toString().padStart(2, "0") + ":" +
        now.getMinutes().toString().padStart(2, "0");

    if (current === targetTime) {
        new Notification("‚è∞ Time Reached!", {
            body: "It is now " + targetTime
        });

        document.getElementById("status").innerText =
            "Notification sent at " + current;

        clearInterval(checkInterval);
    }
}
</script>

</body>
</html>